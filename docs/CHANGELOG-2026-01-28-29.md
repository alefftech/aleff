# Changelog: Aleff AI Setup (2026-01-28 a 2026-01-29)

## Resumo Executivo

Deploy completo do **Aleff AI** - assistente pessoal do Founder baseado no Moltbot, com integra√ß√£o Google Workspace (Gmail, Calendar, Drive).

---

## Infraestrutura

### Server dev-04 (178.156.214.14)
- **Tipo:** Hetzner CCX13
- **Container:** `aleffai` (Docker)
- **URL P√∫blica:** https://aleffai.a25.com.br
- **Telegram:** @aleff_000_bot

### Componentes
| Componente | Status | Descri√ß√£o |
|------------|--------|-----------|
| Gateway Moltbot | ‚úÖ | ws://localhost:18789, exposto via Traefik |
| Telegram Bot | ‚úÖ | @aleff_000_bot com dmPolicy: open |
| Claude Max | ‚úÖ | Autenticado via setup-token |
| PostgreSQL | ‚úÖ | pgvector para Founder Memory |
| Traefik | ‚úÖ | SSL via Let's Encrypt + Cloudflare |

---

## Google Workspace Integration

### OAuth Setup
- **Conta:** aleff@iavancada.com
- **Project ID:** neural-sunup-485823-g4
- **Client ID:** 552479160833-7226aff9fuih2gfhatq7m367gv73tep2.apps.googleusercontent.com

### Escopos Autorizados
```
- openid, email, profile
- https://mail.google.com/
- https://www.googleapis.com/auth/gmail.modify
- https://www.googleapis.com/auth/gmail.send
- https://www.googleapis.com/auth/calendar
- https://www.googleapis.com/auth/calendar.events
- https://www.googleapis.com/auth/pubsub
- https://www.googleapis.com/auth/drive.readonly
- https://www.googleapis.com/auth/drive.file
```

### APIs Habilitadas no GCP
- Gmail API ‚úÖ
- Google Calendar API ‚úÖ
- Cloud Pub/Sub API ‚úÖ
- Google Drive API ‚úÖ

### gog CLI
- **Vers√£o:** v0.9.0
- **Instala√ß√£o:** Via Dockerfile (bin√°rio Linux amd64)
- **Config:** Persistido em volume `./gogcli`
- **Keyring:** File backend com GOG_KEYRING_PASSWORD

---

## Funcionalidades Implementadas

### üìß Gmail
| Funcionalidade | Comando | Status |
|----------------|---------|--------|
| Buscar emails | `gog gmail search "query"` | ‚úÖ |
| Ler email | `gog gmail read <id>` | ‚úÖ |
| Enviar email | - | ‚ùå N√£o implementado |

### üìÖ Google Calendar
| Funcionalidade | Comando | Status |
|----------------|---------|--------|
| Ver agenda hoje | `gog calendar events --today` | ‚úÖ |
| Ver pr√≥ximos dias | `gog calendar events --days N` | ‚úÖ |
| Criar evento | `gog calendar create --summary --from --to` | ‚úÖ |
| Criar com Meet | `gog calendar create ... --with-meet` | ‚úÖ |

### üìÅ Google Drive
| Funcionalidade | Comando | Status |
|----------------|---------|--------|
| Listar arquivos | `gog drive ls` | ‚úÖ |
| Buscar | `gog drive search "query"` | ‚úÖ |
| Baixar | `gog drive get <id>` | ‚úÖ |
| Mover/Organizar | - | ‚ùå Precisa escopo `drive` full |

---

## Arquivos Criados/Modificados

### Dockerfile
```dockerfile
# Adicionado gog CLI
RUN curl -sL https://github.com/steipete/gogcli/releases/download/v0.9.0/gogcli_0.9.0_linux_amd64.tar.gz | tar xz -C /usr/local/bin/
```

### docker-compose.aleff.yml
```yaml
environment:
  - GOG_KEYRING_PASSWORD=${GOG_KEYRING_PASSWORD:-aleff2026secure}
volumes:
  - ./gogcli:/home/node/.config/gogcli:rw
```

### Scripts Criados
- `scripts/google-token.sh` - Refresh OAuth token
- `scripts/gmail-search.sh` - Buscar emails
- `scripts/gmail-read.sh` - Ler email
- `scripts/calendar-today.sh` - Agenda do dia
- `scripts/calendar-upcoming.sh` - Pr√≥ximos eventos
- `scripts/calendar-create.sh` - Criar evento com Meet

### Configura√ß√£o do Agente
- `CLAUDE.md` - Instru√ß√µes Gmail/Calendar/Drive
- `TOOLS.md` (no container) - Comandos gog dispon√≠veis

---

## Credenciais (.env)

```bash
# Google OAuth
GOOGLE_CLIENT_ID=552479160833-...
GOOGLE_CLIENT_SECRET=GOCSPX-...
GOOGLE_REFRESH_TOKEN=1//05i2tJNrSHWK0...
GOOGLE_ACCOUNT=aleff@iavancada.com

# Transcription
GROQ_API_KEY=gsk_...  # Primary (whisper-large-v3-turbo)
OPENAI_API_KEY=sk-... # Fallback (whisper-1)

# gog CLI
GOG_KEYRING_PASSWORD=aleff2026secure
```

---

## Commits

1. `feat(aleff): add Google Workspace integration (Gmail + Calendar)`
   - Dockerfile com gog CLI
   - Scripts Gmail/Calendar
   - CLAUDE.md e README.md atualizados

2. `feat(aleff): persist gog CLI config across container restarts`
   - Volume gogcli
   - GOG_KEYRING_PASSWORD

---

## Pr√≥ximos Passos

- [ ] Adicionar escopo `drive` full para mover/organizar arquivos
- [ ] Implementar envio de emails
- [ ] Vector search no Founder Memory
- [ ] Pokemon Generator

---

**Autor:** CTO Ronald + Claude Opus 4.5
**Data:** 2026-01-29
